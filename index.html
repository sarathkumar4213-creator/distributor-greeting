<!DOCTYPE html>
<html>
<head>
  <title>Distributor Greeting Generator</title>
  <style>
    body { font-family: Arial; text-align: center; background:#f2f2f2; }
    input { padding:8px; margin:5px; width:260px; }
    button { padding:10px 20px; margin:10px; }
    canvas { background:#fff; margin-top:15px; }
  </style>
</head>
<body>

<h2>New Year Greeting Creator</h2>

<input id="name" placeholder="Name" /><br>
<input id="mobile" placeholder="Mobile Number" /><br>
<input id="email" placeholder="Email ID" /><br>
<input type="file" id="logo" accept="image/*" /><br>

<button onclick="generate()">Generate Image</button>

<br><br>
<canvas id="canvas"></canvas>

<br><br>
<a id="download" download="NewYearGreeting.png">‚¨á Download Image</a>

<script>
const baseImg = new Image();
baseImg.src = "base.jpg";

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

baseImg.onload = () => {
  canvas.width = baseImg.width;
  canvas.height = baseImg.height + 200;
  ctx.drawImage(baseImg, 0, 0);
};

function generate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseImg, 0, 0);

  const name = document.getElementById("name").value;
  const mobile = document.getElementById("mobile").value;
  const email = document.getElementById("email").value;
  const photoFile = document.getElementById("photo").files[0];
  const logoFile = document.getElementById("logo").files[0];

  const extraHeight = 220;
  const baseY = baseImg.height;

  const gradient = ctx.createLinearGradient(0, baseY, 0, baseY + extraHeight);
  gradient.addColorStop(0, "#0f4c81");
  gradient.addColorStop(1, "#a31621");

  ctx.fillStyle = gradient;
  ctx.fillRect(0, baseY, canvas.width, extraHeight);

  const textX = 40;
  let textY = baseY + 45;

  ctx.fillStyle = "#ffffff";
  ctx.textAlign = "left";

  ctx.font = "30px Arial";
  ctx.fillText(name, textX, textY);

  ctx.font = "24px Arial";
  ctx.fillText("Mutual Fund Distributor", textX, textY + 35);

  ctx.font = "22px Arial";
  ctx.fillText("üìû " + mobile, textX, textY + 80);
  ctx.fillText("‚úâÔ∏è " + email, textX, textY + 120);

  if (photoFile) {
    const photoImg = new Image();
    photoImg.onload = function () {
      ctx.drawImage(photoImg, canvas.width - 160, baseY + 40, 120, 120);
      drawLogo();
    };
    photoImg.src = URL.createObjectURL(photoFile);
  } else {
    drawLogo();
  }

  function drawLogo() {
    if (logoFile) {
      const logoImg = new Image();
      logoImg.onload = function () {
        ctx.drawImage(logoImg, 20, 20, 120, 120);
        document.getElementById("download").href = canvas.toDataURL();
      };
      logoImg.src = URL.createObjectURL(logoFile);
    } else {
      document.getElementById("download").href = canvas.toDataURL();
    }
  }
}
</script>

</body>
</html>
